<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>{{ title or site.title }} | {{ site.name }}</title>
  <meta name="title" content="{{ title or site.title }} | {{ site.name }}">
  <meta name="description" content="{{ description or site.description }}">
  <meta name="author" content="{{ site.author }}">
  <meta name="robots" content="index, follow">

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{{ ogType or 'website' }}">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:title" content="{{ title or site.title }}">
  <meta property="og:description" content="{{ description or site.description }}">
  <meta property="og:image" content="{{ site.url }}{{ ogImage or site.ogImage }}">
  <meta property="og:site_name" content="{{ site.name }}">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="{{ site.social.twitter }}">
  <meta name="twitter:url" content="{{ site.url }}{{ page.url }}">
  <meta name="twitter:title" content="{{ title or site.title }}">
  <meta name="twitter:description" content="{{ description or site.description }}">
  <meta name="twitter:image" content="{{ site.url }}{{ ogImage or site.ogImage }}">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/assets/images/icons/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/icons/apple-touch-icon.png">

  <!-- Preconnect to important origins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/styles.css">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ site.name }}",
    "url": "{{ site.url }}",
    "logo": "{{ site.url }}{{ site.logo }}",
    "description": "{{ site.description }}",
    "sameAs": [
      "https://twitter.com/{{ site.social.twitter | replace('@', '') }}",
      "https://instagram.com/{{ site.social.instagram | replace('@', '') }}",
      "https://facebook.com/{{ site.social.facebook }}"
    ]
  }
  </script>

  {% if schema %}
  <script type="application/ld+json">
  {{ schema | safe }}
  </script>
  {% endif %}

  <!-- WebSite schema for sitelinks search box -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "{{ site.url }}",
    "name": "{{ site.name }}",
    "description": "{{ site.description }}",
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "{{ site.url }}/search/?q={search_term_string}"
      },
      "query-input": "required name=search_term_string"
    }
  }
  </script>
</head>
<body class="min-h-screen flex flex-col">
  {% include "components/header.njk" %}

  <main id="main-content" class="flex-grow">
    {{ content | safe }}
  </main>

  {% include "components/footer.njk" %}

  <!-- Alpine.js for interactivity -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- FAQ Toggle Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // FAQ Accordion
      document.querySelectorAll('.faq-question').forEach(button => {
        button.addEventListener('click', () => {
          const expanded = button.getAttribute('aria-expanded') === 'true';
          button.setAttribute('aria-expanded', !expanded);
          const answer = button.nextElementSibling;
          answer.classList.toggle('active');
        });
      });

      // Mobile menu toggle
      const menuToggle = document.getElementById('mobile-menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      if (menuToggle && mobileMenu) {
        menuToggle.addEventListener('click', () => {
          mobileMenu.classList.toggle('open');
          document.body.classList.toggle('overflow-hidden');
        });
      }

      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    });
  </script>
</body>
</html>
